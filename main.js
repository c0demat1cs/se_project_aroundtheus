!function(){"use strict";class e{constructor(e,t,s,i,r,n){let{name:o,link:l,_id:a,isLiked:d}=e;this._name=o,this._link=l,this._id=a,this.isLiked=d,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteCard=i,this._handleLikeClick=r,this._handleUnlikeClick=n}getId(){return this._id}getIsLiked(){return this._isLiked}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getElement(),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._setEventListeners(),this._setLikeState(),this._cardElement}_setLikeState(){!0===this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}handleLikeIcon=()=>{this._likeButton.classList.toggle("card__like-button_active")};_setEventListeners(){this._likeButton.addEventListener("click",(()=>{!0===this.isLiked?this._handleUnlikeClick(this):this._handleLikeClick(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}deleteCard=()=>{this._cardElement.remove(),this._cardElement=null}}class t{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputElements=this._formElement.querySelectorAll(this._inputSelector),this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return Array.from(this._inputElements).some((e=>!e.validity.valid))}_disableButton(){this._submitButton&&(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_enableButton(){this._submitButton&&(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputElements.forEach((e=>{this._checkInputValidity(e)})),this._toggleButtonState()}disableSubmitButton(){this._disableButton()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleKeyDown=this._handleKeyDown.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleKeyDown)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleKeyDown)}_handleKeyDown(e){"Escape"===e.key&&this.close()}setEventListeners(){const e=this._popupElement.querySelector(".modal__close");e&&e.addEventListener("click",(()=>this.close())),this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}var i=class extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputFields=this._popupForm.querySelectorAll(".modal__input"),this._formSubmitHandler=this._formSubmitHandler.bind(this),this._submitBtn=this._popupForm.querySelector(".modal__button"),this._submitBtnText=this._submitBtn.textContent}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}_getInputValues(){const e={};return this._inputFields.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",this._formSubmitHandler)}_formSubmitHandler(e){e.preventDefault(),this._handleFormSubmit(this._getInputValues())}close(){this._popupForm.reset(),super.close()}};const r={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},n=(document.querySelector(".cards__list"),document.querySelector("#profile-edit-modal"),document.querySelector("#add-card-modal"),document.querySelector(".modal__image"),document.querySelector(".modal__popup-caption"),document.querySelector("#profile-add-button")),o=document.querySelector("#profile-edit-button"),l=document.querySelector(".profile__edit-icon"),a=(document.querySelector("#card-title-input"),document.querySelector("#card-link-input"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),d=document.querySelector("#profile-description-input");document.forms["profile-form"],document.forms["card-form"];const c={};var u;u=r,Array.from(document.querySelectorAll(u.formSelector)).forEach((e=>{const s=new t(u,e),i=e.getAttribute("name");c[i]=s,s.enableValidation()}));const h=new t(r,document.querySelector("#profile-form"));h.enableValidation();const _=new t(r,document.querySelector("#add-card-form"));_.enableValidation();const m=new t(r,document.querySelector("#avatar-form"));m.enableValidation();const p=new i("#add-card-modal",((e,t)=>{var s,i;s=e.title,i=e.link,p.renderLoading(!0),k.addNewCard({name:s,link:i}).then((e=>{!function(e){const t=y(e);L.addItem(t)}(e),_.disableSubmitButton(),p.close(),p.renderLoading(!1)})).catch((e=>{console.error(e)}))}));p.setEventListeners();const E=new i("#profile-edit-modal",(function(e){let{title:t,description:s}=e;E.renderLoading(!0),k.editProfileInfo({name:t,about:s}).then((e=>{S.setUserInfo(e.name,e.about),h.disableSubmitButton(),E.close(),E.renderLoading(!1)})).catch((e=>{console.error(e)}))}));E.setEventListeners();const b=new class extends s{constructor(e){super({popupSelector:e}),this._popupCaption=this._popupElement.querySelector(".modal__popup-caption"),this._imageElement=this._popupElement.querySelector(".modal__image")}open(e){let{link:t,name:s}=e;this._popupCaption.textContent=s,this._imageElement.src=t,this._imageElement.alt=`Image of ${s}`,super.open()}}("#image-modal");b.setEventListeners();const v=new class extends s{constructor(e){super({popupSelector:e})}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}setSubmitCallback(e){this._handleSubmit=e}}("#delete-card-modal",C);v.setEventListeners();const f=new i("#avatar-modal",(function(e){f.renderLoading(!0);const t=e.link;k.updateAvatar({avatar:t}).then((e=>{f.close(),S.setAvatar(e.avatar),m.disableSubmitButton(),f.renderLoading(!1)})).catch((e=>{console.error(e)}))}));f.setEventListeners();const S=new class{constructor(e,t,s){this._profileTitleElement=document.querySelector(e),this._profileDescriptionElement=document.querySelector(t),this._profileAvatarElement=document.querySelector(s)}getUserInfo(){return{title:this._profileTitleElement.textContent,description:this._profileDescriptionElement.textContent}}setUserInfo(e,t){this._profileTitleElement.textContent=e,this._profileDescriptionElement.textContent=t}setAvatar(e){this._profileAvatarElement.src=e}}(".profile__title",".profile__description",".profile__image"),k=new class{constructor(e){this.baseUrl=e.baseUrl,this.headers=e.headers,this._checkResponse=this._checkResponse.bind(this)}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._checkResponse)}getUserInfo(){return this._request(`${this.baseUrl}/users/me`,{headers:this.headers})}getInitialCards(){return this._request(`${this.baseUrl}/cards`,{headers:this.headers})}editProfileInfo(e){let{name:t,about:s}=e;return this._request(`${this.baseUrl}/users/me`,{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:s})})}addNewCard(e){let{name:t,link:s}=e;return this._request(`${this.baseUrl}/cards`,{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:s})})}deleteCard(e){return this._request(`${this.baseUrl}/cards/${e}`,{method:"DELETE",headers:this.headers})}likeCard(e){return this._request(`${this.baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this.headers})}removeLike(e){return this._request(`${this.baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this.headers})}updateAvatar(e){let{avatar:t}=e;return this._request(`${this.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"d918969b-47fa-4f72-8138-61be6ab55840","Content-Type":"application/json"}}),L=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{L.addItem(y(e))}},".cards__list");function y(t){return new e(t,"#card-template",g,C,q,I).getView()}function g(e){let{name:t,link:s}=e;b.open({link:s,name:t})}function C(e){v.open(),v.setSubmitCallback((()=>{k.deleteCard(e.getId()).then((()=>{e.deleteCard(),v.close()})).catch((e=>{console.error(e)}))}))}function q(e){k.likeCard(e._id).then((t=>{e.handleLikeIcon(),e.isLiked=!0,console.log("Card liked:",t)})).catch((e=>{console.error(e)}))}function I(e){k.removeLike(e._id).then((t=>{e.handleLikeIcon(),e.isLiked=!1,console.log("Card disliked:",t)})).catch((e=>{console.log(e)}))}k.getInitialCards().then((e=>{L.renderItems(e.reverse())})).catch((e=>{console.error(e)})),k.getUserInfo().then((e=>{S.setUserInfo(e.name,e.about),S.setAvatar(e.avatar)})).catch((e=>{console.error(e)})),o.addEventListener("click",(()=>{const e=S.getUserInfo();a.value=e.title,d.value=e.description,h.resetValidation(),E.open()})),n.addEventListener("click",(()=>{p.open()})),l.addEventListener("click",(()=>{f.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZCeEUsRUFDRzJELFNBQVNhLEVBQUt0TSxLQUNkZ0ksTUFBTUMsSUFDTHFFLEVBQUt2SyxpQkFDTHVLLEVBQUtyTSxTQUFVLEVBQ2Z5SSxRQUFRNkQsSUFBSSxjQUFldEUsRUFBSyxJQUVqQ08sT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxHQUV4QixDQUVBLFNBQVM1SSxFQUFrQnlNLEdBQ3pCeEUsRUFDRzRELFdBQVdZLEVBQUt0TSxLQUNoQmdJLE1BQU1DLElBQ0xxRSxFQUFLdkssaUJBQ0x1SyxFQUFLck0sU0FBVSxFQUNmeUksUUFBUTZELElBQUksaUJBQWtCdEUsRUFBSyxJQUVwQ08sT0FBT0MsSUFDTkMsUUFBUTZELElBQUk5RCxFQUFJLEdBRXRCLENBMUlBWCxFQUNHcUQsa0JBQ0FuRCxNQUFNd0UsSUFTTG5FLEVBQVE0RCxZQUFZTyxFQUFPQyxVQUFVLElBRXRDakUsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxJQUl0QlgsRUFDR3VDLGNBQ0FyQyxNQUFNd0UsSUFFTHZELEVBQVNDLFlBQVlzRCxFQUFPMU0sS0FBTTBNLEVBQU94RCxPQUN6Q0MsRUFBU2EsVUFBVTBDLEVBQU81QyxPQUFPLElBRWxDcEIsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxJQXVJdEI1QixFQUFrQjVFLGlCQUFpQixTQUFTLEtBQzFDLE1BQU15SyxFQUFXekQsRUFBU29CLGNBQzFCdEQsRUFBa0JOLE1BQVFpRyxFQUFTN0UsTUFDbkNiLEVBQXdCUCxNQUFRaUcsRUFBUzVELFlBQ3pDdkIsRUFBa0JqRCxrQkFDbEJzRSxFQUFpQjVELE1BQU0sSUFJekI0QixFQUFpQjNFLGlCQUFpQixTQUFTLEtBQ3pDeUYsRUFBYTFDLE1BQU0sSUFJckI4QixFQUFvQjdFLGlCQUFpQixTQUFTLEtBQzVDMEgsRUFBa0IzRSxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBpc0xpa2VkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgX2hhbmRsZURlbGV0ZUNhcmQsXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxuICAgIGhhbmRsZVVubGlrZUNsaWNrXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2lkID0gX2lkO1xuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQgPSBfaGFuZGxlRGVsZXRlQ2FyZDtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlVW5saWtlQ2xpY2sgPSBoYW5kbGVVbmxpa2VDbGljaztcbiAgfVxuXG4gIGdldElkKCkge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuXG4gIC8vIGdldCB0aGUgbGlrZSBzdGF0dXNcbiAgZ2V0SXNMaWtlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcbiAgfVxuXG4gIC8vICBNRVRIT0RTXG4gIC8vYWJzdHJhY3Rpb24gdG8gZ2V0IHRoZSBjYXJkIGVsZW1lbnRcbiAgX2dldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICAvLyBnZXRWaWV3IGRlZmluZXMgdGhlIGNhcmQgZWxlbWVudFxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fc2V0TGlrZVN0YXRlKCk7XG4gICAgLy8gcmV0dXJuIHRoZSBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG5cbiAgX3NldExpa2VTdGF0ZSgpIHtcbiAgICAvLyBpZiB0aGUgYnV0dG9uIGlzIGxpa2VkXG4gICAgLy8gc2hvdyB0aGUgc3RhdGUgb2YgdGhlIGJ1dHRvblxuICAgIGlmICh0aGlzLmlzTGlrZWQgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUxpa2VJY29uID0gKCkgPT4ge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfTtcblxuICAvLyBMSVNURU5FUlNcbiAgLy8gZmV0Y2ggZWFjaCBlbGVtZW50ICwgYWRkIGxpc3RlbmVyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5pc0xpa2VkID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVVubGlrZUNsaWNrKHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgICAgfVxuICAgICAgLy90aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzKTtcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSBpbWFnZSBjbGlja1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEhBTkRMRVJTO1xuXG4gIGRlbGV0ZUNhcmQgPSAoKSA9PiB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9O1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICAvLyBTYXZlIGVsZW1lbnRzIGluIHRoZSBjbGFzcyBpbnN0YW5jZVxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgdGhpcy5faW5wdXRTZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2lucHV0RWxlbWVudHMpLnNvbWUoXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl9zdWJtaXRCdXR0b24pIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl9zdWJtaXRCdXR0b24pIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlS2V5RG93biA9IHRoaXMuX2hhbmRsZUtleURvd24uYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vIG9wZW5zIHBvcHVwXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlS2V5RG93bik7XG4gIH1cblxuICAvLyBjbG9zZXMgcG9wdXBcbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlS2V5RG93bik7XG4gIH1cblxuICAvLyBsaXN0ZW5zIGZvciBlc2MgYnV0dG9uXG4gIF9oYW5kbGVLZXlEb3duKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gc2V0cyBldmVudCBsaXN0ZW5lcnNcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgaWYgKGNsb3NlQnV0dG9uKSB7XG4gICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB9XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiLy8gdGhpcyBjbGFzcyBpcyBhIGNoaWxkIGNsYXNzIG9mIHRoZSBQb3B1cCBjbGFzc1xuLy8gaXQgZGVhbHMgZXhjbHVzaXZlbHkgd2l0aCBmb3Jtc1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7IC8vIGNhbGwgdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBwYXJlbnQgY2xhc3MgUG9wdXBcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTsgLy8gYWNjZXNzIHRoZSBmb3JtIGVsZW1lbnQgaW5zaWRlIHRoZSBwb3B1cFxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0OyAvLyBzYXZlIHRoZSBoYW5kbGVGb3JtU3VibWl0IGZ1bmN0aW9uIGZvciBsYXRlciB1c2VcbiAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLl9mb3JtU3VibWl0SGFuZGxlciA9IHRoaXMuX2Zvcm1TdWJtaXRIYW5kbGVyLmJpbmQodGhpcyk7IC8vIGJpbmRzIGV2dCBsc3RuciB0byB0aGlzXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTsgLy8gYWNjZXNzIHRoZSBzdWJtaXQgYnV0dG9uXG4gICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmV0dXJuIGJhY2sgdGhlIGluaXRpYWwgdGV4dCBvZiB0aGUgYnV0dG9uXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdG5UZXh0O1xuICAgIH1cbiAgfVxuXG4gIC8vIGNvbGxlY3RzIGRhdGEgZnJvbSBhbGwgdGhlIGlucHV0IGZpZWxkcyBhbmQgcmV0dXJucyBpdCBhcyBhbiBvYmplY3RcbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgLy8gb3ZlcnJpZGUgdGhlIHBhcmVudCBtZXRob2RcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAvLyBsaXN0ZW5zIGZvciBmb3JtIHN1Ym1pc3Npb25cbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9mb3JtU3VibWl0SGFuZGxlcik7XG4gIH1cbiAgLy8gaGFuZGxlIGZvcm0gc3VibWl0XG4gIF9mb3JtU3VibWl0SGFuZGxlcihldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICB9XG5cbiAgLy8gY2xvc2VzIGFuZCByZXNldHMgdGhlIGZvcm1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vIFdSQVBQRVJTXG5leHBvcnQgY29uc3QgcGxhY2VzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgbW9kYWxJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IGltYWdlQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3BvcHVwLWNhcHRpb25cIik7XG5cbi8vIEJVVFRPTlMgQU5EIE9USEVSIERPTSBFTEVNRU5UU1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZWRpdC1pY29uXCJcbik7XG5cbi8vIEZPUk0gREFUQVxuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRpdGxlLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbGluay1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZm9ybVwiXTtcbmV4cG9ydCBjb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiY2FyZC1mb3JtXCJdO1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCB7XG4gIHNldHRpbmdzLFxuICBwcm9maWxlQWRkQnV0dG9uLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcHJvZmlsZUF2YXRhckJ1dHRvbixcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXFxcblxuLy8gPT09PT09PT09ICBGT1JNIFZBTElEQVRPUlMgID09PT09PT09PSAvL1xuXG4vLyBzdG9yZXMgZm9ybSB2YWxpZGF0b3JzXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgLy8gaGVyZSB5b3UgZ2V0IHRoZSBuYW1lIG9mIHRoZSBmb3JtXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuXG4gICAgLy8gaGVyZSB5b3Ugc3RvcmUgdGhlIHZhbGlkYXRvciB1c2luZyB0aGUgYG5hbWVgIG9mIHRoZSBmb3JtXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpOyAvLyBjYWxscyBlbmFibGUgdmFsaWRhdGlvblxuXG4vLyBOZXcgRWRpdCBGb3JtIFZhbGlkYXRvciBpbnN0YW5jZVxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgc2V0dGluZ3MsXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1mb3JtXCIpXG4pO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyAvLyBjYWxsIGVuYWJsZSB2YWxpZGF0aW9uXG5cbi8vIE5ldyBDYXJkIGZvcm0gdmFsaWRhdG9yIGluc3RhbmNlXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBzZXR0aW5ncyxcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpXG4pO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyAvLyBjYWxsIGVuYWJsZSB2YWxpZGF0aW9uXG5cbi8vIG5ldyBhdmF0YXIgZm9ybSB2YWxpZGF0b3IgaW5zdGFuY2VcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgc2V0dGluZ3MsXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYXZhdGFyLWZvcm1cIilcbik7XG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsgLy8gY2FsbCBlbmFibGUgdmFsaWRhdGlvblxuXG4vLyA9PT09PT09PT0gIFBPUFVQIENMQVNTIElOU1RBTkNFUyA9PT09PT09PT0gLy9cblxuLy8gTmV3IFBvcHVwIEZvcm0gZm9yIGFkZGluZyBhIGNhcmRcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICAoZm9ybURhdGEsIHJlbmRlckxvYWRpbmcpID0+IHtcbiAgICBjb25zdCBuYW1lID0gZm9ybURhdGEudGl0bGU7XG4gICAgY29uc3QgbGluayA9IGZvcm1EYXRhLmxpbms7XG4gICAgaGFuZGxlTmV3Q2FyZFN1Ym1pdChuYW1lLCBsaW5rLCAoKSA9PiB7XG4gICAgICByZW5kZXJMb2FkaW5nKCk7XG4gICAgfSk7XG4gIH1cbik7XG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gTmV3IFBvcHVwIEZvcm0gdG8gZWRpdCBwcm9maWxlXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxuKTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gTmV3IFBvcHVwIHdpdGggSW1hZ2VcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gbmV3IHBvcHVwIGZvciBkZWxldGluZyBhIGNhcmRcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXG4gIFwiI2RlbGV0ZS1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZURlbGV0ZUNhcmRcbik7XG4vLyBzZXQgZXZlbnQgbGlzdGVuZXJzIGZvciBkZWxldGUgY2FyZCBwb3B1cFxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIG5ldyBwb3B1cCBmb3IgY2hhbmdpbmcgYXZhdGFyXG5jb25zdCBjaGFuZ2VBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhdmF0YXItbW9kYWxcIixcbiAgaGFuZGxlQXZhdGFyU3VibWl0XG4pO1xuY2hhbmdlQXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gPT09PT09PT09ICBVU0VSIElORk8gID09PT09PT09PSAvL1xuXG4vLyBJbnN0YW5jZSBvZiBVc2VyIEluZm9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBcIi5wcm9maWxlX190aXRsZVwiLFxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxuICBcIi5wcm9maWxlX19pbWFnZVwiXG4pO1xuXG4vLyA9PT09PT09PT0gIFNFQ1RJT04gID09PT09PT09PSAvL1xuXG4vLyA9PT09PT09PT0gIEFQSXMgID09PT09PT09PSAvL1xuXG4vLyBJbnN0YW5jZSBvZiBBcGlcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImQ5MTg5NjliLTQ3ZmEtNGY3Mi04MTM4LTYxYmU2YWI1NTg0MFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YSkpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbi8vIGZldGNoIGFuZCByZW5kZXIgaW5pdGlhbCBjYXJkc1xuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgLy8gLy8gSW5zdGFuY2Ugb2YgU2VjdGlvblxuICAgIC8vIGxldCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgLy8gICB7XG4gICAgLy8gICAgIGl0ZW1zOiByZXN1bHQucmV2ZXJzZSgpLFxuICAgIC8vICAgICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcbiAgICAvLyAgIH0sXG4gICAgLy8gICBcIiNjYXJkc19fbGlzdFwiXG4gICAgLy8gKTtcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKHJlc3VsdC5yZXZlcnNlKCkpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxuICB9KTtcblxuLy8gZmV0Y2ggYW5kIHJlbmRlciB1c2VyIGluZm9cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgLy8gdXBkYXRlIFVJIHRvIHJlZmxlY3QgdGhlIHVzZXIgaW5mbyBmcm9tIHRoZSBkYlxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdC5uYW1lLCByZXN1bHQuYWJvdXQpO1xuICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXN1bHQuYXZhdGFyKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgfSk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLy8gPT09PT09PT09ICBGVU5DVElPTlMgID09PT09PT09PSAvL1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmRWaWV3ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gIC8vIGNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7fSwgXCIjY2FyZHNfX2xpc3RcIik7XG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkVmlldyk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmREYXRhLFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNhcmQsXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxuICAgIGhhbmRsZVVubGlrZUNsaWNrXG4gICk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayh7IG5hbWUsIGxpbmsgfSkge1xuICAvLyBvcGVuIHRoZSBwb3B1cCB3aXRoIHRoZSBpbWFnZVxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKHsgbGluaywgbmFtZSB9KTtcbn1cblxuLy8gPT09PT09PT09ICBFVkVOVCBIQU5ETEVSUyAgPT09PT09PT09IC8vXG5cbi8vIEhhbmRsZXMgZWRpdCBmb3JtIHN1Ym1pdFxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkge1xuICBlZGl0UHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaVxuICAgIC5lZGl0UHJvZmlsZUluZm8oe1xuICAgICAgbmFtZTogdGl0bGUsXG4gICAgICBhYm91dDogZGVzY3JpcHRpb24sXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmFib3V0KTtcbiAgICAgIGVkaXRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgIGVkaXRQcm9maWxlUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuXG4vLyBoYW5kbGVzIG5ldyBjYXJkIHN1Ym1pc3Npb25cbmZ1bmN0aW9uIGhhbmRsZU5ld0NhcmRTdWJtaXQobmFtZSwgbGluaykge1xuICBuZXdDYXJkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpXG4gICAgLmFkZE5ld0NhcmQoe1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGxpbms6IGxpbmssXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcmVuZGVyQ2FyZChkYXRhKTtcbiAgICAgIGNhcmRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICAgIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgbmV3Q2FyZFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbn1cblxuLy8gaGFuZGxlcyBkZWxldGluZyBjYXJkXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmQpIHtcbiAgLy8gb3BlbiB0aGUgZGVsZXRlIGNhcmQgcG9wdXBcbiAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcbiAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdENhbGxiYWNrKCgpID0+IHtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuZ2V0SWQoKSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cblxuLy8gZnVuY3Rpb24gdG8gaGFuZGxlIGxpa2UgYnV0dG9uIGNsaWNrXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZCkge1xuICBhcGlcbiAgICAubGlrZUNhcmQoY2FyZC5faWQpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNhcmQuaGFuZGxlTGlrZUljb24oKTtcbiAgICAgIGNhcmQuaXNMaWtlZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmxvZyhcIkNhcmQgbGlrZWQ6XCIsIGRhdGEpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVW5saWtlQ2xpY2soY2FyZCkge1xuICBhcGlcbiAgICAucmVtb3ZlTGlrZShjYXJkLl9pZClcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY2FyZC5oYW5kbGVMaWtlSWNvbigpO1xuICAgICAgY2FyZC5pc0xpa2VkID0gZmFsc2U7XG4gICAgICBjb25zb2xlLmxvZyhcIkNhcmQgZGlzbGlrZWQ6XCIsIGRhdGEpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbi8vIGhhbmRsZXMgYXZhdGFyIGZvcm0gc3VibWl0IHdpdGggYXBpXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoZm9ybURhdGEpIHtcbiAgY2hhbmdlQXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgY29uc3QgYXZhdGFyID0gZm9ybURhdGEubGluaztcbiAgYXBpXG4gICAgLnVwZGF0ZUF2YXRhcih7XG4gICAgICBhdmF0YXIsXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY2hhbmdlQXZhdGFyUG9wdXAuY2xvc2UoKTtcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihkYXRhLmF2YXRhcik7XG4gICAgICBhdmF0YXJGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICAgIGNoYW5nZUF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KTtcbn1cblxuLy8gPT09PT09PT09ICBFVkVOVCBMSVNURU5FUlMgID09PT09PT09PSAvL1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gdXNlckRhdGEudGl0bGU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckRhdGEuZGVzY3JpcHRpb247XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vLyBMaXN0ZW5zIGZvciBhZGQgYnV0dG9uIGNsaWNrLCBmdW5jdGlvbnMgdG8gb3BlbiBuZXcgY2FyZCBmcm9tIG1vZGFsLlxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBuZXdDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbi8vIExpc3RlbnMgZm9yIGF2YXRhciBjbGljaywgZnVuY3Rpb25zIHRvIG9wZW4gY2hhbmdlIGF2YXRhciBtb2RhbC5cbnByb2ZpbGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2hhbmdlQXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgLy8gY2xhc3MgZmllbGRzIGRlZmluZWRcbiAgICB0aGlzLl9wb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19wb3B1cC1jYXB0aW9uXCJcbiAgICApO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgfVxuXG4gIG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBgSW1hZ2Ugb2YgJHtuYW1lfWA7XG5cbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICB9XG5cbiAgLy8gc2V0IGV2ZW50IGxpc3RlbmVyc1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBzZXQgc3VibWl0IGNhbGxiYWNrXG4gIHNldFN1Ym1pdENhbGxiYWNrKGFjdGlvbikge1xuICAgIC8vIHNldCBzdWJtaXQgaGFuZGxlclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGFjdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhDb25maXJtYXRpb247XG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICAvLyBwYXNzIGluIHNlbGVjdG9yJ3MgYXMgYXJndW1lbnRzXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb2ZpbGVUaXRsZVNlbGVjdG9yLFxuICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yLFxuICAgIHByb2ZpbGVBdmF0YXJTZWxlY3RvclxuICApIHtcbiAgICAvLyB1c2UgcXVlcnkgc2VsZWN0b3IgdG8gZ2V0IGVsZW1lbnRzIGFuZCBhc3NpZ24gdG8gdGhpc1xuICAgIHRoaXMuX3Byb2ZpbGVUaXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVUaXRsZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIC8vIHJldHVybiBvYmplY3QgY29udGFpbmluZyB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBwcm9maWxlIGVsZW1lbnRzXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0aGlzLl9wcm9maWxlVGl0bGVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIC8vIHBhc3MgaW4gdGhlIHZhbHVlcyBmcm9tIHRoZSBmb3JtIHN1Ym1pc3Npb25cbiAgc2V0VXNlckluZm8odGl0bGUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fcHJvZmlsZVRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgICAvLyBzaW1pbGFybHkgZm9yIHRoZSBvdGhlciBlbGVtZW50XG4gIH1cblxuICBzZXRBdmF0YXIobGluaykge1xuICAgIC8vIHNldCB0aGUgXCJzcmNcIiBvZiB0aGUgYXZhdGFyIGVsZW1lbnRcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyRWxlbWVudC5zcmMgPSBsaW5rO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gICAgdGhpcy5fY2hlY2tSZXNwb25zZSA9IHRoaXMuX2NoZWNrUmVzcG9uc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vIG1ldGhvZCBmb3IgY2hlY2tpbmcgcmVzcG9uc2Ugc3RhdHVzXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICAvLyByZXF1ZXN0IG1ldGhvZFxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gZnVuY3Rpb24gdG8gZ2V0IHVzZXIgaW5mbyBmcm9tIHRoZSBzZXJ2ZXJcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGxvYWRpbmcgY2FyZHMgZnJvbSB0aGUgc2VydmVyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gZWRpdGluZyB0aGUgcHJvZmlsZVxuICBlZGl0UHJvZmlsZUluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGFkZGluZyBhIG5ldyBjYXJkXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gZGVsZXRpbmcgYSBjYXJkXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICAvLyBsaWtlIGEgY2FyZFxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHJlbW92ZSBhIGxpa2VcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHVwZGF0aW5nIHRoZSBwcm9maWxlIHBpY3R1cmVcbiAgdXBkYXRlQXZhdGFyKHsgYXZhdGFyIH0pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlVW5saWtlQ2xpY2siLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlVW5saWtlQ2xpY2siLCJnZXRJZCIsImdldElzTGlrZWQiLCJfaXNMaWtlZCIsIl9nZXRFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJfY2FyZEVsZW1lbnQiLCJfbGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfY2FyZEltYWdlRWwiLCJfY2FyZFRpdGxlRWwiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9zZXRMaWtlU3RhdGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJoYW5kbGVMaWtlSWNvbiIsInRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWxldGVDYXJkIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJBcnJheSIsImZyb20iLCJzb21lIiwiX2Rpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwicmVzZXRWYWxpZGF0aW9uIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlS2V5RG93biIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjbG9zZUJ1dHRvbiIsInRhcmdldCIsImNvbnRhaW5zIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0RmllbGRzIiwiX2Zvcm1TdWJtaXRIYW5kbGVyIiwiX3N1Ym1pdEJ0biIsIl9zdWJtaXRCdG5UZXh0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlQWRkQnV0dG9uIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQXZhdGFyQnV0dG9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImZvcm1zIiwiZm9ybVZhbGlkYXRvcnMiLCJjb25maWciLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVkaXRGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwibmV3Q2FyZFBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1EYXRhIiwidGl0bGUiLCJhcGkiLCJhZGROZXdDYXJkIiwidGhlbiIsImRhdGEiLCJjYXJkRGF0YSIsImNhcmRWaWV3IiwiY3JlYXRlQ2FyZCIsInNlY3Rpb24iLCJhZGRJdGVtIiwicmVuZGVyQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZWRpdFByb2ZpbGVQb3B1cCIsIl9yZWYyIiwiZGVzY3JpcHRpb24iLCJlZGl0UHJvZmlsZUluZm8iLCJhYm91dCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwb3B1cFdpdGhJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJfaW1hZ2VFbGVtZW50IiwiZGVsZXRlQ2FyZFBvcHVwIiwiX2hhbmRsZVN1Ym1pdCIsInNldFN1Ym1pdENhbGxiYWNrIiwiYWN0aW9uIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImNoYW5nZUF2YXRhclBvcHVwIiwiYXZhdGFyIiwidXBkYXRlQXZhdGFyIiwic2V0QXZhdGFyIiwicHJvZmlsZVRpdGxlU2VsZWN0b3IiLCJwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciIsInByb2ZpbGVBdmF0YXJTZWxlY3RvciIsIl9wcm9maWxlVGl0bGVFbGVtZW50IiwiX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJfcHJvZmlsZUF2YXRhckVsZW1lbnQiLCJnZXRVc2VySW5mbyIsIm9wdGlvbnMiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIl9yZXF1ZXN0IiwidXJsIiwiZmV0Y2giLCJnZXRJbml0aWFsQ2FyZHMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImxpa2VDYXJkIiwicmVtb3ZlTGlrZSIsIl9yZWYzIiwiYXV0aG9yaXphdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmQiLCJsb2ciLCJyZXN1bHQiLCJyZXZlcnNlIiwidXNlckRhdGEiXSwic291cmNlUm9vdCI6IiJ9